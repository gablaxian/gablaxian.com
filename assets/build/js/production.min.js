var StarField=function(a,b){"use strict";function c(){localStorage.getItem("background_stars")?(r=JSON.parse(localStorage.getItem("background_stars")),s=JSON.parse(localStorage.getItem("flickering_stars")),t=s.length):d(),e(),window.addEventListener("resize",f),window.addEventListener("scroll",g),h()}function d(){"use asm";var a=Math.round(l/100)*(m/100).toFixed(1)*p;r=[],s=[];for(var b=0;b<a;b++)r.push({x:Math.round(Math.random()*l),y:Math.round(Math.random()*m),w:Math.random()<.5?2:1,b:Math.round(Math.random()*128)}),s.push({x:Math.round(Math.random()*l),y:Math.round(Math.random()*m),w:Math.random()<.5?2:1,b:Math.round(Math.random()*255),s:Math.random()<.5?0:1});localStorage.setItem("background_stars",JSON.stringify(r)),localStorage.setItem("flickering_stars",JSON.stringify(s)),t=s.length}function e(){j.width=l,j.height=m,k.fillStyle="#000",k.fillRect(0,0,l,m);for(var a=r.length,b=0;a>b;b++)k.fillStyle="rgb("+r[b].b+","+r[b].b+","+r[b].b+")",k.fillRect(r[b].x,r[b].y,2,2)}function f(){window.innerWidth!=l&&(l=window.innerWidth,d(),e())}function g(){n=window.pageYOffset,o=n>m?!0:!1}function h(){o||i(),window.setTimeout(h,1e3/24)}function i(){for(var a=t;a--;){var b=s[a];1==b.s?b.b<255?b.b+=q:(b.s=0,b.b-=q):b.b>55?b.b-=q:(b.s=1,b.b+=q),k.fillStyle="rgb("+b.b+","+b.b+","+b.b+")",k.fillRect(b.x,b.y,b.w,b.w)}}var b=b||{},j=a||document.querySelector("#starfield")||document.querySelector(".starfield"),k=j.getContext("2d"),l=b.width||window.innerWidth,m=b.height||80,n=0,o=!1,p=b.star_density||10,q=b.speed||6,r=new Array,s=new Array,t=0;c()};StarField();var StarField=function(a){function b(){window.localStorage?!n&&localStorage.getItem("background_stars")?(p=JSON.parse(localStorage.getItem("background_stars")),q=JSON.parse(localStorage.getItem("flickering_stars"))):(c(),localStorage.setItem("background_stars",JSON.stringify(p)),localStorage.setItem("flickering_stars",JSON.stringify(q))):c(),r=q.length,h.width=j,h.height=k,i.fillStyle="#000",i.fillRect(0,0,j,k);for(var a=p.length,b=0;a>b;b++)i.fillStyle="rgb("+p[b].brightness+","+p[b].brightness+","+p[b].brightness+")",i.fillRect(p[b].x,p[b].y,2,2);window.addEventListener("resize",d,!1),window.addEventListener("scroll",e,!1)}function c(){"use asm";var a=Math.round(j/100)*(k/100).toFixed(1)*o;p=[],q=[];for(var b=0;b<a;b++)p.push({x:Math.round(Math.random()*j),y:Math.round(Math.random()*k),brightness:Math.round(Math.random()*128)}),q.push({x:Math.round(Math.random()*j),y:Math.round(Math.random()*k),brightness:Math.round(Math.random()*255),state:Math.random()<.5?"fading":"glowing"})}function d(){window.innerWidth!=j&&(j=window.innerWidth,n=!0,b())}function e(){l=window.pageYOffset,m=l>k?!0:!1}function f(){requestAnimFrame(f),m||g()}function g(){for(var a=r,b=3;a--;){var c=q[a];"glowing"==c.state?c.brightness<255?c.brightness+=b:(c.state="fading",c.brightness-=b):c.brightness>2?c.brightness-=b:(c.state="glowing",c.brightness+=b),i.fillStyle="rgb("+c.brightness+","+c.brightness+","+c.brightness+")",i.fillRect(c.x,c.y,2,2)}}var h=a.id?document.getElementById(a.id):document.body.appendChild(document.createElement("canvas")),i=h.getContext("2d"),j=a.width||window.innerWidth,k=a.height||150,l=0,m=!1,n=!1,o=a.star_density||10,p=new Array,q=new Array,r=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),b(),f()};