var StarField=function(a,b){"use strict";function c(){localStorage.getItem("background_stars")?(q=JSON.parse(localStorage.getItem("background_stars")),r=JSON.parse(localStorage.getItem("flickering_stars")),s=r.length):d(),e(),window.addEventListener("resize",f),window.addEventListener("scroll",g),h()}function d(){"use asm";var a=Math.round(l/100)*(m/100).toFixed(1)*p;q=[],r=[];for(var b=0;b<a;b++)q.push({x:Math.round(Math.random()*l),y:Math.round(Math.random()*m),brightness:Math.round(Math.random()*128)}),r.push({x:Math.round(Math.random()*l),y:Math.round(Math.random()*m),brightness:Math.round(55+Math.random()*200),state:Math.random()<.5?"fading":"glowing"});localStorage.setItem("background_stars",JSON.stringify(q)),localStorage.setItem("flickering_stars",JSON.stringify(r)),s=r.length}function e(){j.width=l,j.height=m,k.fillStyle="#000",k.fillRect(0,0,l,m);for(var a=q.length,b=0;a>b;b++)k.fillStyle="rgb("+q[b].brightness+","+q[b].brightness+","+q[b].brightness+")",k.fillRect(q[b].x,q[b].y,2,2)}function f(){window.innerWidth!=l&&(l=window.innerWidth,d(),e())}function g(){n=window.pageYOffset,o=n>m?!0:!1}function h(){requestAnimFrame(h),o||i()}function i(){for(var a=s,b=3;a--;){var c=r[a];"glowing"==c.state?c.brightness<255?c.brightness+=b:(c.state="fading",c.brightness-=b):c.brightness>55?c.brightness-=b:(c.state="glowing",c.brightness+=b),k.fillStyle="rgb("+c.brightness+","+c.brightness+","+c.brightness+")",k.fillRect(c.x,c.y,2,2)}}var b=b||{},j=a||document.querySelector("#starfield")||document.querySelector(".starfield"),k=j.getContext("2d"),l=b.width||window.innerWidth,m=b.height||80,n=0,o=!1,p=b.star_density||10,q=new Array,r=new Array,s=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),c()};StarField();var StarField=function(a){function b(){window.localStorage?!n&&localStorage.getItem("background_stars")?(p=JSON.parse(localStorage.getItem("background_stars")),q=JSON.parse(localStorage.getItem("flickering_stars"))):(c(),localStorage.setItem("background_stars",JSON.stringify(p)),localStorage.setItem("flickering_stars",JSON.stringify(q))):c(),r=q.length,h.width=j,h.height=k,i.fillStyle="#000",i.fillRect(0,0,j,k);for(var a=p.length,b=0;a>b;b++)i.fillStyle="rgb("+p[b].brightness+","+p[b].brightness+","+p[b].brightness+")",i.fillRect(p[b].x,p[b].y,2,2);window.addEventListener("resize",d,!1),window.addEventListener("scroll",e,!1)}function c(){"use asm";var a=Math.round(j/100)*(k/100).toFixed(1)*o;p=[],q=[];for(var b=0;b<a;b++)p.push({x:Math.round(Math.random()*j),y:Math.round(Math.random()*k),brightness:Math.round(Math.random()*128)}),q.push({x:Math.round(Math.random()*j),y:Math.round(Math.random()*k),brightness:Math.round(Math.random()*255),state:Math.random()<.5?"fading":"glowing"})}function d(){window.innerWidth!=j&&(j=window.innerWidth,n=!0,b())}function e(){l=window.pageYOffset,m=l>k?!0:!1}function f(){requestAnimFrame(f),m||g()}function g(){for(var a=r,b=3;a--;){var c=q[a];"glowing"==c.state?c.brightness<255?c.brightness+=b:(c.state="fading",c.brightness-=b):c.brightness>2?c.brightness-=b:(c.state="glowing",c.brightness+=b),i.fillStyle="rgb("+c.brightness+","+c.brightness+","+c.brightness+")",i.fillRect(c.x,c.y,2,2)}}var h=a.id?document.getElementById(a.id):document.body.appendChild(document.createElement("canvas")),i=h.getContext("2d"),j=a.width||window.innerWidth,k=a.height||150,l=0,m=!1,n=!1,o=a.star_density||10,p=new Array,q=new Array,r=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),b(),f()};